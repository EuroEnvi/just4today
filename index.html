<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Источник — Путь к свободе</title>
    
    <meta name="description" content="Счетчик дней трезвости и чистоты. Поиск групп АА и АН, ежедневные мотивационные цитаты. Твой помощник на пути выздоровления.">
    <meta name="keywords" content="трезвость, чистота, АА, АН, счетчик дней, анонимные алкоголики, анонимные наркоманы, группы поддержки, бросить пить">
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://euroenvi.github.io/just4today/">
    <meta property="og:title" content="Источник — Счетчик трезвости и поиск групп">
    <meta property="og:description" content="Считай свои дни свободы, находи группы поддержки рядом и получай вдохновение каждый день.">
    <meta property="og:image" content="hhttps://euroenvi.github.io/just4today/social-preview.png">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://euroenvi.github.io/just4today/">
    <meta property="twitter:title" content="Источник — Твой путь к свободе">
    <meta property="twitter:description" content="Счетчик дней трезвости и чистоты. Удобный поиск групп АА/АН.">
    <meta property="twitter:image" content="https://euroenvi.github.io/just4today/social-preview.png">
    <meta name="theme-color" content="#1e3c72">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Источник">
    
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3222/3222672.png">
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/3222/3222672.png">
    
    <link rel="manifest" id="manifest" href="data:application/manifest+json;charset=utf-8,%7B%22name%22%3A%22%D0%98%D1%81%D1%82%D0%BE%D1%87%D0%BD%D0%B8%D0%BA%22%2C%22short_name%22%3A%22%D0%98%D1%81%D1%82%D0%BE%D1%87%D0%BD%D0%B8%D0%BA%22%2C%22start_url%22%3A%22.%22%2C%22display%22%3A%22standalone%22%2C%22background_color%22%3A%22%231e3c72%22%2C%22theme_color%22%3A%22%231e3c72%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22https%3A%2F%2Fcdn-icons-png.flaticon.com%2F512%2F3222%2F3222672.png%22%2C%22sizes%22%3A%22512x512%22%2C%22type%22%3A%22image%2Fpng%22%7D%5D%7D">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="style.css">
    
    <script src="groups_db.js"></script> 
</head>
<body>

    <div id="cloud-tunnel"></div>

    <div id="ui-scene">
        
        <div id="intro-layer" class="layer">
            <div id="intro-setup" class="flex flex-col items-center w-full max-w-md p-6 text-center relative z-30 h-full justify-center">
                <h1 class="text-5xl md:text-7xl font-serif-elegant text-white mb-2 text-glow" style="text-shadow: 0 0 30px rgba(255,255,255,0.8);">СВЕТ</h1>
                
                <div class="holographic-glass p-6 rounded-2xl w-full mb-6 relative text-left">
                    <div class="mb-4">
                        <label class="form-label">Ваше Имя</label>
                        <input type="text" id="intro-name" class="form-input text-center font-serif-elegant" placeholder="Имя">
                    </div>
                    <div class="mb-4 text-center">
                        <label class="form-label mb-2">Пол</label>
                        <div class="flex justify-center custom-radio">
                            <div class="flex-1 flex">
                                <input type="radio" name="gender" id="gender-m" value="m" checked>
                                <label for="gender-m">Муж</label>
                            </div>
                            <div class="flex-1 flex">
                                <input type="radio" name="gender" id="gender-f" value="f">
                                <label for="gender-f">Жен</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label mb-2">Мой путь</label>
                        <div class="flex justify-center custom-radio">
                            <div class="flex-1 flex">
                                <input type="radio" name="addiction" id="addiction-sober" value="sober" checked>
                                <label for="addiction-sober">Трезвость</label>
                            </div>
                            <div class="flex-1 flex">
                                <input type="radio" name="addiction" id="addiction-clean" value="clean">
                                <label for="addiction-clean">Чистота</label>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="form-label">Дата начала пути</label>
                        <input type="datetime-local" id="intro-date-input" class="form-input text-center font-monospace-digital">
                    </div>
                </div>

                <button id="start-journey-btn" class="cinematic-button px-10 py-4 rounded-full text-xs font-bold tracking-[0.2em] shadow-lg w-full max-w-xs">
                    НАЧАТЬ ПУТЬ
                </button>
            </div>

            <div id="intro-returning" class="hidden flex-col items-center relative z-30">
                <div class="text-blue-900 font-bold mb-4 text-lg readable-text" id="welcome-message">С возвращением</div>
                <button id="enter-app-btn" class="group relative w-48 h-48 md:w-64 md:h-64 rounded-full holographic-glass flex items-center justify-center transition-all duration-700 hover:scale-105 active:scale-95 cursor-pointer border border-white/60 bg-white/30 shadow-2xl">
                    <div class="absolute inset-0 rounded-full border border-white/60 animate-ping opacity-30"></div>
                    <div class="text-center relative z-10">
                        <span class="block text-4xl mb-3 text-blue-800 drop-shadow-md">☀</span>
                        <span class="text-xs tracking-[0.3em] font-bold text-blue-900 uppercase block">Войти<br>в свет</span>
                    </div>
                </button>
            </div>
        </div>

        <div id="app-layer" class="layer">
            
            <div class="absolute top-12 left-0 w-full text-center z-50 pointer-events-none">
                <h2 id="status-text" class="text-xl md:text-2xl font-serif-elegant font-bold text-white text-glow drop-shadow-md tracking-wide">
                    </h2>
            </div>

            <div id="floating-wrapper" class="max-w-5xl h-[60vh] mt-[-5vh] items-center">
                <div id="digit-backdrop" class="holographic-glass shadow-2xl"></div>
                
                <div id="countdown-grid" class="relative z-10 flex flex-col items-center w-full select-none">
                    <div class="flex justify-center gap-2 md:gap-12 text-white font-monospace-digital w-full px-2">
                        <div class="text-center flex-1">
                            <div id="years" class="text-5xl md:text-9xl digital-value text-glow leading-none transition-all">00</div>
                            <div id="years-label" class="text-[9px] md:text-sm opacity-90 mt-2 tracking-[0.3em] font-bold text-white drop-shadow-md">ЛЕТ</div>
                        </div>
                        <div class="text-3xl md:text-7xl opacity-80 flex items-start pt-2 font-thin text-white text-shadow">:</div>
                        <div class="text-center flex-1">
                            <div id="months" class="text-5xl md:text-9xl digital-value text-glow leading-none transition-all">00</div>
                            <div id="months-label" class="text-[9px] md:text-sm opacity-90 mt-2 tracking-[0.3em] font-bold text-white drop-shadow-md">МЕС</div>
                        </div>
                        <div class="text-3xl md:text-7xl opacity-80 flex items-start pt-2 font-thin text-white text-shadow">:</div>
                        <div class="text-center flex-1">
                            <div id="days" class="text-5xl md:text-9xl digital-value text-glow leading-none transition-all">00</div>
                            <div id="days-label" class="text-[9px] md:text-sm opacity-90 mt-2 tracking-[0.3em] font-bold text-white drop-shadow-md">ДНЕЙ</div>
                        </div>
                    </div>

                    <div class="flex gap-6 mt-6 md:mt-12 text-white font-monospace-digital text-lg md:text-2xl tracking-widest opacity-100 readable-white font-bold">
                        <div class="flex flex-col items-center"><span id="hours">00</span></div>
                        <span class="opacity-80">:</span>
                        <div class="flex flex-col items-center"><span id="minutes">00</span></div>
                        <span class="opacity-80">:</span>
                        <div class="flex flex-col items-center"><span id="seconds">00</span></div>
                    </div>

                    <div class="mt-8 w-full flex justify-center">
                        <div class="flex flex-col items-center justify-center px-10 py-4 rounded-xl holographic-glass-darker border border-white/20">
                            <span id="total-days-label" class="text-[10px] md:text-xs uppercase tracking-[0.3em] text-white/70 font-bold mb-1">Всего дней в чистоте</span>
                            <span id="total-days" class="text-4xl md:text-5xl font-monospace-digital font-bold text-white text-glow leading-none mt-1">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="quote-container">
                <p id="quote-text" class="text-sm md:text-lg italic text-blue-900 font-serif-elegant leading-relaxed font-bold w-11/12 max-w-xl text-center" style="text-shadow: 0 1px 1px rgba(255,255,255,0.8);"></p>
            </div>

            <div class="absolute bottom-16 w-full flex justify-center items-center gap-8 z-50 pointer-events-auto">
                <button id="settings-btn" class="control-btn hover:bg-white/40 active:scale-95" title="Настройки">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.52a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                </button>

                <button id="info-btn" class="control-btn hover:bg-white/40 active:scale-95" title="Поиск групп">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M12 16v-4"></path>
                        <path d="M12 8h.01"></path>
                    </svg>
                </button>

                <button id="reset-btn" class="control-btn hover:bg-red-100 hover:border-red-400/50 text-blue-900 hover:text-red-600 active:scale-95" title="Сброс (удерживайте)">
                    <svg class="absolute inset-0 w-full h-full pointer-events-none" viewBox="0 0 60 60">
                        <circle class="progress-ring__circle" stroke="#ef4444" stroke-width="3" fill="transparent" r="28" cx="30" cy="30" stroke-dasharray="175.9" stroke-dashoffset="175.9"></circle>
                    </svg>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                        <path d="M3 3v5h5"></path>
                    </svg>
                </button>
            </div>

            <div class="absolute bottom-1 w-full text-center z-40 pointer-events-none">
                <div class="inline-block px-4 py-1 rounded-full holographic-glass border-none bg-white/20">
                    <span id="display-addiction" class="text-[9px] uppercase tracking-widest font-bold text-blue-900 opacity-70">СВОБОДА</span>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-overlay" class="fixed inset-0 z-[100] hidden flex items-center justify-center px-6 opacity-0 transition-opacity duration-500">
        <div id="modal-content" class="holographic-glass p-8 rounded-3xl max-w-sm w-full text-center transform scale-90 transition-transform duration-500 border border-white/50 bg-white/40">
            <h3 class="text-2xl font-serif-elegant text-blue-900 mb-4 font-bold">Всё в порядке</h3>
            <p class="text-blue-900/80 mb-8 leading-relaxed text-sm font-semibold">
                Срыв — это не конец пути, а часть опыта. <br><br>
                Важно не то, что ты упал, а то, что ты готов встать. <br>
                <span class="block mt-4 text-blue-900 font-bold">Начнем с чистого листа?</span>
            </p>
            <div class="flex flex-col gap-3">
                <button id="confirm-reset" class="cinematic-button py-4 rounded-xl bg-red-500/80 text-white border-none hover:bg-red-600 w-full font-bold text-xs tracking-widest shadow-lg">ДА, Я ГОТОВ</button>
                <button id="cancel-reset" class="py-4 rounded-xl text-blue-900/70 hover:text-blue-900 transition-colors w-full text-xs uppercase tracking-widest font-bold">Отмена</button>
            </div>
        </div>
    </div>

    <div id="settings-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center px-6 backdrop-blur-md bg-white/30 transition-opacity duration-300">
        <div class="holographic-glass p-6 rounded-3xl max-w-sm w-full relative border border-white/50 bg-white/60 overflow-y-auto max-h-[90vh]">
            <h3 class="text-xl font-serif-elegant text-blue-900 mb-6 text-center font-bold">Настройки</h3>
            
            <div class="space-y-4 mb-6 text-left">
                <div>
                    <label class="form-label">Имя</label>
                    <input type="text" id="settings-name" class="form-input">
                </div>
                
                <div>
                    <label class="form-label">Пол</label>
                    <div class="flex gender-radio custom-radio">
                        <div class="flex-1 flex">
                            <input type="radio" name="settings-gender" id="s-gender-m" value="m">
                            <label for="s-gender-m" class="w-full text-center">Муж</label>
                        </div>
                        <div class="flex-1 flex">
                            <input type="radio" name="settings-gender" id="s-gender-f" value="f">
                            <label for="s-gender-f" class="w-full text-center">Жен</label>
                        </div>
                    </div>
                </div>

                <div>
                    <label class="form-label">Мой путь</label>
                    <div class="flex gender-radio custom-radio">
                        <div class="flex-1 flex">
                            <input type="radio" name="settings-addiction" id="s-addiction-sober" value="sober">
                            <label for="s-addiction-sober">Трезвость</label>
                        </div>
                        <div class="flex-1 flex">
                            <input type="radio" name="settings-addiction" id="s-addiction-clean" value="clean">
                            <label for="s-addiction-clean">Чистота</label>
                        </div>
                    </div>
                </div>

                <div>
                    <label class="form-label">Дата начала</label>
                    <input type="datetime-local" id="settings-date-input" class="form-input text-center">
                </div>
            </div>

            <button id="save-settings" class="cinematic-button py-4 w-full rounded-xl text-xs font-bold tracking-widest bg-blue-900/80 text-white hover:bg-blue-900">СОХРАНИТЬ</button>
            <button id="close-settings" class="absolute top-4 right-4 text-blue-900/50 hover:text-blue-900 p-2 font-bold text-xl">✕</button>
        </div>
    </div>

    <div id="info-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center px-4 backdrop-blur-md bg-white/30 transition-opacity duration-300">
        <div class="holographic-glass p-6 rounded-3xl max-w-sm w-full relative border border-white/50 bg-white/70 overflow-hidden flex flex-col max-h-[85vh]">
            
            <div class="flex justify-between items-center mb-4">
                <div class="flex items-center gap-3">
                    <h3 class="text-xl font-serif-elegant text-blue-900 font-bold">Группы</h3>
                    <a href="https://docs.google.com/forms/d/e/1FAIpQLSdZkzMh5CysBiEGaiUE0SXGtEngw1AnHzB15F6KQxriXEf-Ow/viewform?usp=dialog" target="_blank" class="text-blue-900/60 hover:text-blue-900 transition-transform hover:scale-110" title="Добавить группу">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="16"></line>
                            <line x1="8" y1="12" x2="16" y2="12"></line>
                        </svg>
                    </a>
                </div>
                <button id="close-info" class="text-blue-900/50 hover:text-blue-900 p-1 font-bold text-xl">✕</button>
            </div>

            <div class="space-y-4 mb-4 flex-shrink-0">
                <input type="text" id="city-search" placeholder="Поиск города..." class="form-input text-center text-sm" style="background: rgba(255,255,255,0.5);">
                
                <div class="flex custom-radio">
                    <div class="flex-1 flex">
                        <input type="radio" name="group-type" id="type-aa" value="AA" checked>
                        <label for="type-aa">АА</label>
                    </div>
                    <div class="flex-1 flex">
                        <input type="radio" name="group-type" id="type-na" value="NA">
                        <label for="type-na">АН</label>
                    </div>
                </div>
            </div>

            <div id="groups-list" class="overflow-y-auto space-y-3 flex-1 pr-1 custom-scrollbar">
                </div>
        </div>
    </div>

    <div id="group-detail-modal" class="fixed inset-0 z-[110] hidden flex items-center justify-center px-4 backdrop-blur-lg bg-blue-900/20 transition-opacity duration-300">
        <div class="holographic-glass p-6 rounded-3xl max-w-sm w-full relative border border-white/50 bg-white/90 overflow-hidden flex flex-col shadow-2xl max-h-[90vh]">
            
            <button id="close-detail" class="absolute top-4 right-4 text-blue-900/50 hover:text-blue-900 p-1 font-bold text-xl z-20">✕</button>
            
            <div class="overflow-y-auto custom-scrollbar flex-1 pr-1 pb-4">
                <div class="text-center mb-6 mt-4">
                    <h3 id="detail-group-name" class="text-2xl font-serif-elegant text-blue-900 font-bold mb-1 leading-tight">Название</h3>
                    <p id="detail-group-city" class="text-sm font-bold text-blue-900/60 uppercase tracking-widest">Город</p>
                    <p id="detail-group-metro" class="text-xs font-bold text-blue-900/50 mt-1"></p>
                </div>

                <div class="space-y-3 text-left mb-6">
                    <div class="bg-white/40 p-3 rounded-xl border border-white/60">
                        <label class="text-[9px] uppercase tracking-widest text-blue-900/50 font-bold block mb-1">Адрес</label>
                        <p id="detail-group-address" class="text-blue-900 font-bold text-sm leading-snug">...</p>
                    </div>
                    
                    <div class="bg-white/40 p-3 rounded-xl border border-white/60">
                        <label class="text-[9px] uppercase tracking-widest text-blue-900/50 font-bold block mb-1">Время</label>
                        <p id="detail-group-time" class="text-blue-900 font-bold text-sm">...</p>
                    </div>
                    
                    <div class="bg-white/40 p-3 rounded-xl border border-white/60">
                        <label class="text-[9px] uppercase tracking-widest text-blue-900/50 font-bold block mb-1">Контакты</label>
                        <p id="detail-group-contact" class="text-blue-900 font-bold font-mono text-sm mb-1">...</p>
                        
                        <div id="detail-links-container" class="flex flex-wrap gap-2 mt-2">
                            <a id="detail-group-website" href="#" target="_blank" class="hidden text-[10px] bg-blue-100 text-blue-900 px-2 py-1 rounded border border-blue-200 hover:bg-blue-200">Сайт</a>
                            <a id="detail-group-email" href="#" class="hidden text-[10px] bg-blue-100 text-blue-900 px-2 py-1 rounded border border-blue-200 hover:bg-blue-200">Email</a>
                        </div>
                    </div>

                    <div id="detail-directions-block" class="bg-white/40 p-3 rounded-xl border border-white/60 hidden">
                        <label class="text-[9px] uppercase tracking-widest text-blue-900/50 font-bold block mb-1">Как добраться</label>
                        <p id="detail-group-directions" class="text-blue-900 font-medium text-xs leading-relaxed max-h-32 overflow-y-auto custom-scrollbar">...</p>
                    </div>
                </div>

                <div class="flex flex-col gap-3 mt-auto">
                    <button id="detail-btn-call" class="cinematic-button py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-blue-900 hover:text-white group transition-all">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="opacity-70 group-hover:opacity-100">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                        </svg>
                        <span id="detail-btn-call-text" class="font-bold text-xs tracking-widest">ПОЗВОНИТЬ</span>
                    </button>
                    
                    <button id="detail-btn-map" class="py-3 rounded-xl bg-white/50 border border-blue-900/10 text-blue-900 font-bold text-xs tracking-widest hover:bg-white flex items-center justify-center gap-2">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon>
                            <line x1="8" y1="2" x2="8" y2="18"></line>
                            <line x1="16" y1="6" x2="16" y2="22"></line>
                        </svg>
                        ОТКРЫТЬ КАРТУ
                    </button>
                    
                    <button id="back-to-list" class="mt-1 text-blue-900/50 hover:text-blue-900 text-xs font-bold tracking-widest uppercase">
                        ← Назад к списку
                    </button>
                </div>
            </div>

        </div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>